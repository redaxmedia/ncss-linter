#!/usr/bin/env node

const program = require('commander');
const ncss = require('../');
const core = ncss.core;
const reporter = ncss.reporter;
const ruleset = ncss.ruleset;
const option = ncss.option;
const packageArray = require('../package.json');

let REPORTER;
let CORE;

program
	.version(packageArray.version)
	.option('-H, --html <html>')
	.option('-P, --path <path>')
	.option('-U, --url <url>')
	.option('-N, --namespace <namespace>')
	.option('-E, --separator <separator>')
	.option('-S, --selector <selector>')
	.option('-T, --threshold <threshold>')
	.option('-L, --loglevel <loglevel>')
	.option('-Y, --haltonerror')
	.option('-Z, --haltonwarn')
	.parse(process.argv);

if (program.html || program.path || program.url)
{
	option.init(
	{
		html: program.html,
		path: program.path,
		url: program.url,
		namespace: program.namespace,
		separator: program.separator,
		selector: program.selector,
		threshold: program.threshold,
		loglevel: program.loglevel,
		haltonerror: program.haltonerror,
		haltonwarn: program.haltonwarn
	});
	REPORTER = new reporter(
	{
		option: option
	});
	CORE = new core(
	{
		reporter: REPORTER,
		ruleset: ruleset,
		option: option
	});
	CORE.init();
}
else
{
	process.exit(1);
}